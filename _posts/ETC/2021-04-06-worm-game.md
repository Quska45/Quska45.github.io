---
layout: post
title: "지렁이 게임 만들기"
subtitle: ""
comments: true
categories : ETC
date: 2021-04-06
background: '/img/posts/06.jpg'
---
<style>
  /* 2way헤더와 라인포인트*/
  table {
      border-collapse: collapse;
      text-align: left;
      line-height: 1.5;
      border: 1px solid black;
  }
  table thead th {
      text-align: center;
      padding: 10px;
      font-weight: bold;
      vertical-align: top;
      color: #1b3453;
      border-top: 2px solid #1b3453;
      border-bottom: 2px solid #1b3453;
      min-width: 150px;
  }
  table tbody th {
      padding: 10px 15px;
      font-weight: bold;
      vertical-align: top;
      border-bottom: 1px solid #ccc;
      background: #f3f6f7;
  }
  table td {
      padding: 10px 15px;
      vertical-align: top;
      border-bottom: 1px solid #ccc;
  }
</style>

### 지렁이 게임 솔루션 개발
- 태호, 광진 각자 개발(기능정의 등 각자 진행)
- 솔루션 개발 완료 후 솔루션 바탕으로 게임 개발 진행(상대방 솔루션으로 개발)
- 매주 월요일 신과장님 점검
- 4/25 개발 완료 목표
- 코드리뷰는 개발 완료 후 진행

### 기능정의
1. 지렁이는 1마리
2. 필드에 있는 먹이를 먹으면 커짐(먹이의 종류는 2가지. 빨강(2커짐) / 노랑(1커짐))
3. 커지는건 지렁이의 길이가 1늘어남
4. 벽/장애물/지렁이 자신에게 닿으면 사망
5. 장애물과 먹이의 위치는 랜덤
6. 먹이를 먹거나 5초가 지날 때 마다 1점씩 획득

### 인터페이스 정의
1. 객체(Object)
 - 지렁이 게임에서 사용되는 모든 클래스가 구현하게 되는 인터페이스

- 필드 변수

|변수명|타입|기본값|설명|
|------|----|-----|----|
|id|String|String|id를 입력 받는다.|
|position|객체배열|[{x:1, y:1}]]|객체의 위치. 객체가 가진 위치를 저장한다.|
|killWorm|boolean |true|지렁이를 죽이는 객체인지에 대한 여부. 지렁이의 머리가 닿으면 지렁이는 죽는다.|
|type|WgObjType|WgObject.wgObject|객체의 타입|

- 필드 메서드

|변수명  |return타입|인자|설명|
|--------|---|------|---|
|moveByPosition|Object|{x:x, y:y}|객체를 인자의 위치로 이동 시킨다.|
|moveRight|Object||position.x를 1증가 시킨다.|
|moveLeft|Object||position.x를 1감소 시킨다.|
|moveTop|Object||position.y를 1감소 시킨다.|
|moveBottom|Object||position.y를 1감소 시킨다.|

### 클래스 정의
##### 모든 클래스는 객체 인스턴스를 구현해야 한다.
1. DimensionalArray
- 다차원 배열을 만들어 주는 객체
- 게임이 어떻게 진행되는지 확인하기 위해서 만든 객체

2. MoveDirection
- right, left, top, bottom의 방향을 나타내기 위한 enum
- {right: "right", left: "left", top: "top", bottom: "bottom"}

3. WgObjType
- worm, stone 등 지렁이 게임 솔루션의 객체들의 Type에 대한 enum
- 솔루션의 객체들은 자신만의 type을 가진다.
- {wgObject: "wgObject", worm: "worm", stone: "stone", wall: "wall", food: "food"}

2. 지렁이(Worm)
- 지렁이 게임의 지렁이 객체
- 지렁이의 크기(길이)에 따라 지렁이 객체가 생기게 되고 머리는 하나만 존재한다.

 - 필드 변수

|변수명|타입|기본값|설명|
|------|----|-----|----|
|head|boolean|false|true일 경우 지렁이의 머리에 해당한다.|
|direction|MoveDirection|MoveDirection.right|direction 프로퍼티 값에 따라 이동할 방향이 정해진다.|
|autoMove|boolean|false|true일 경우 지렁이는 MoveDirection 값에 따라 자동으로 이동한다.|

 - 필드 메서드

|변수명|return타입|인자|설명|
|------|---|---|---|
|autoMove()|지렁이 instance||지렁이를 움직이는 기능. 지렁이의 머리부분이 움직인다. 지렁이의 나머지 부분은 머리를 따라 1칸씩 움직이게 된다.|

1. 먹이(Food)
- 지렁이가 먹는 먹이 객체.
- 지렁이가 지나갈 수 있는 객체.
- 필드 변수
- 필드 메서드

3. 장애물(Obstacle)
- 클래스 or 인터페이스 계속 고민중. 클래스가 맞는거 같다.
- 돌과 벽의 상위 클래스
- 필드 변수
- 필드 메서드

4. 돌(Stone)
 - 지렁이가 지나갈 수 없는 돌 객체
 - 필드 변수
 - 필드 메서드

5. 필드(Field)
 - wbObject를 상속하지 않는 클래스이다.
 - 모든 객체는 필드에 들어가서 관리될 필요가 있다.
 - 필드의 가장 자리는 벽으로 구성되고 지렁이가 지나갈 수 없고 닿으면 죽는다.

- 필드 변수

|변수명|타입|기본값|설명|
|------|----|-----|----|
|id|String|id|아이디 값을 가진다.|
|size|{}|{x:x, y:y}|크기 값을 가진다. 게임 프로그램을 만들 때 객체들의 포지션은 필드의 크기를 넘을 수 없도록 해야 한다.|
|children|{}|{}|지렁이 게임을 위해서 만들어진 객체들이 여기로 들어간다. 배열 or 객체 뭐가 더 좋을까? 배열로 하려고 했는데 객체가 나은거 같다. 큰 문제가 없다면 객체로 하겠다. 하다보니 게임에서 사용되는 객체들이 구분하여 가지고 있을 필요가 있다.|
|worms|[]|[]|Worm 객체들이 들어간다.|

- 필드 메서드

|변수명|return타입|인자|설명|
|------|---|---|---|
|getObjectById|Object|id|id에 해당하는 객체를 리턴한다.|
|removeObjectById|Object|id|id에 해당하는 객체를 Feild에서 제거 한다.|
|add|Object|Object 인스턴스|인자로 주어진 Object 인스턴스를 children과 타입에 따른 객체 프로퍼티에 넣어준다.|
|moveWorm|this.worms||this.worms 안에 있는 객체들이 자신이 가지고 있는 방향으로 한칸씩 움직인다. 이동 후에는 맨 뒤에 있는 Worm 인스턴스 부터 자신의 앞에 있는 Worm 인스턴스의 direction을 이어 받는다.|

6. 벽(Wall)
  - 필드의 가장 자리를 채우게 되는 객체
  - 지렁이가 지나갈 수 없고 닿으면 죽는다.

7. 게임매니저(GameManager)
- 게임 시작 종료 등 전반적인 것들을 관리하는 객체

- 필드 변수

|변수명|타입|기본값|설명|
|------|----|-----|----|
|score|int|0|점수|
|Field|Field|Field| 지렁이 게임에 필요한 객체들을 가지고 있는 Feild 객체가 들어간다.|

- 필드 메서드

|변수명|return타입|인자|설명|
|------|---|---|---|
|gameOver()|gameManager객체||게임을 종료하는 메서드.|
|init()|gameManager객체||게임을 초기화 하는 메서드.|

### API 정의
|변수명|return타입|인자|설명|
|------|---|---|---|
|move()|Object|id, {x:x, y:y}|객체를 인자의 위치로 이동시킨다. 해당위치에 이미 객체가 있다면 이동 불가.|
|remove()|boolean|id|객체를 삭제한다.|

<br/>

<script src="{{"/assets/wormGameEngin.js"}}"></script>
<div style="width: 600px; height: 600px; border: 1px solid black;">
  
</div>

{% highlight ruby linenos %}
{% endhighlight %}

